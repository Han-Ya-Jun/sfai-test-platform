<section class="content-header">
	<h1>
		接口测试管理<small>接口测试</small>
	</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
		<li><a href="#"><i class="fa fa-laptop"></i> 接口测试管理</a></li>
		<li class="active"><i class="fa fa-send"></i>&nbsp;接口测试</li>
	</ol>
</section>

<div class="content">
	<div class="container-fluid" style="padding-right: 0px;padding-left: 0px;margin-right: 0px;margin-left: 0px;">
		<div class="panel panel-default">
			<div class="panel-body" style="padding: 10px 15px 15px 0px;">
				<div class ="row">
					<div class = "col-xs-4" style="padding-right: 0px;">
						<!-- selectAppBegin -->
						<div class = " row-fluid col-md-12 col-xs-12 col-lg-12 col-sm-12" style="padding-left: 5px;padding-right: 0px;margin-bottom:10px;">
	<!-- 						<label class="col-sm-3 control-label" style="padding-left:3px;padding-right:3px;width:65px;">应用名:</label>  -->
							<div class="col-sm-3 input-group-addon" style="padding-left:3px;padding-right:0px;width:65px;">应用名:</div>
					        <div class="col-sm-6" style="padding-left:0px;padding-right:0px;">
					           <select id = "searchAppName" class="form-control select2 " style ="width:100%">
					           </select>
					           <input type="hidden" id = "searchAppId"> 
					        </div> 
					        <div class = "col-xs-3">
					        	<button class ="btn btn-success" onclick = "$.httprpcRequest.initTree()" style="line-height:1.0;background-color:#428cb1;">确定</button>
					        </div>
						</div>
						
						<!-- selectAppEnd -->
					
						<!-- interfaceTreebegin -->
						<div class=" row-fluid col-md-12 col-xs-12 col-lg-12 col-sm-12" style="padding-left: 15px;padding-right: 0px;">
							<div class="row col-md-12 col-xs-12 col-lg-12" style="padding-left: 0px;padding-right: 0px;position:relative; height:350px; overflow-y:auto">							
								<ul style="overflow-x:auto; overfolw-y:auto ;min-height:100%;margin-top:10px"id="InterfaceTree" class="ztree nopadding">	
								</ul>
							</div>			
						</div>
						<!-- interfaceTreeEnd -->
						
						<!-- btnGroup begin -->
						<div class="col-md-12 col-xs-12 col-lg-12 col-sm-12" id ="mockAdd" style="display:none;padding-right: 0px;padding-left: 0px;">
							<div class="col-md-6 col-xs-6 col-lg-6 col-sm-6">
								<button type="button" class="btn btn-default btn-sm btn-block">未开启mock</button>
							</div>
							<div class="col-md-6 col-xs-6 col-lg-6 col-sm-6">
								<button type="button" class="btn btn-primary btn-sm btn-block">已开启上报</button>
							</div>						
							<div class="col-md-12 col-xs-12 col-lg-12 col-sm-12" >
								<button type="button" class="btn btn-success btn-sm btn-block">新增mock参数</button>
							</div>	
						</div>				
						<!-- btnGroup  end -->
						
						<!-- addBtn    End -->
						<div class="col-md-12 col-xs-12 col-lg-12 col-sm-12" style ="margin-top:5px;padding-left: 0px;" id="addBtnDiv">
						
						</div>
						<!-- addBtn    End -->
						
						<!-- mockManager    begin -->
						<div class=" row-fluid col-md-12 col-xs-12 col-lg-12 col-sm-12" style="padding-left: 15px;padding-top: 5px;padding-right: 0px;">
							<div class="row col-md-12 col-xs-12 col-lg-12" id="tableDiv" style="padding-left: 0px;padding-right: 0px;position:relative; height:150px; overflow-y:auto">							
			   					<div id ="mockTable" class="table-responsive" style="display:none;">
									<table class="table">
										<thead>
											<tr>
												<th>mock参数</th>
												<th><div style="width:50px">默认</div></th>
											</tr>
										</thead>
										<tbody id="tableBody">
										</tbody>
									</table>
								</div>							
							</div>
						</div>
						<!-- imockManager    End -->
						
					</div>
	
					<div class = "col-xs-8" style="padding-left: 0px;">
						
						<!-- httpShowStart -->
						<div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 panel-info" id = "httpRequestPanel">
		                	<div class="panel-heading">
					    		<h4 class="panel-title">HTTP请求</h4>
							 </div>
				            <div class="panel-body panel" style="height: auto;">
				                <div class="panel-content">
							        <div id="httpReq">
										<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
						                	<input type="text" class="form-control" name="httpRequestType" style="width:10%;" readonly="readonly" placeholder="GET">
						                	<input type="text" class="form-control col-lg-2" name="httpPath" style="width:60%;" placeholder="http://localhost:8888/services/test/get/{id}/{name}">
						                	<span class="input-group-btn"  style="display: inline;">
							                	<button type="button" class="btn btn-info mg-2-5" style = "background-color:#428cb1;" onclick="$.httprpcRequest.submit.httpSend()">Send</button>
						                	</span>
						                	
						       			</div>
						       			<div class="col-xs-6" style="margin-top:10px;margin-bottom:10px;height:auto;padding-left: 0px;">
						       				请求头：
						       				<div class="col-md-12 col-xs-12 col-lg-12 col-sm-12" id="requestHeaders" style="border: 1px solid #a9a9a9;height:206px;padding-right: 0px;">
						       					<table id="headerTable" style="height:200px;margin-bottom: 10px;width:100%;">
						       						<tbody style="display: block;overflow-y: scroll;height:200px;">
														<tr>
															<td style="width:40%;text-align: center;">键</td>
															<td style="width:5%;text-align: center;"></td>
															<td style="width:40%;text-align: center;">值</td>
															<td style="width:10%;text-align:center;"><a class="detail-icon" href="javascript:" onclick="addHeader(this)"><i class="glyphicon glyphicon-plus icon-plus"></i></a></td>
														</tr>
														<tr>
															<td style="width:40%;text-align: center;">
																<input type="text" class="header-params form-control" style=" border-radius: 4px !important;" name="headKey" required="" value="Content-Type">
															</td>
															<td style="width:5%;text-align: center;">:</td>
															<td style="width:40%;text-align: center;">
																<input type="text" class="header-params form-control" style=" border-radius: 4px !important;" name="headValue" required="" value="application/json">
															</td>
														</tr>
													</tbody>
	                                            </table>
						       				</div>
						       			</div>
						       			<div class="col-xs-6" style="margin-top:10px;margin-bottom:10px;padding-right: 0px;">
							       			<div class="col-xs-6" style="float:left;text-align:left;padding-left: 0px;">
								       			请求参数：
						       				</div>
						       				<div class="col-xs-6" style="float:right;text-align:right;padding-right:0px;">
						       					<button type="button" class="btn btn-default btn-xs" onclick="$.httprpcRequest.httpFormatParams()">格式化JSON</button>
						       				</div>
							       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
							                	<textarea  rows="10" id="httpRequestParams" name="questParams" style="width:100%;"></textarea>
							       			</div>
						       			
						       			</div>
						       			<div style="margin-top:10px;margin-bottom:10px;">
						       			返回结果：
						       			</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
						                	<textarea rows="10" id="httpResponseResult" name="responseResult" style="width:100%;"></textarea>
						       			</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12" style="margin-top:10px;margin-bottom:10px;">
						       			扩展说明：
						       			</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
						                	<textarea rows="5" id="httpExtendParams" name="extendParams" style="width:100%;" readonly="readonly"></textarea>
						       			</div>
								    </div>
						       </div>
						    </div>
						</div>
						<!-- httpShowEnd -->
						
						<!-- rpcShowBegin -->
						<div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 panel-info" id = "rpcRequestPanel">
		                	<div class="panel-heading">
					    		<h4 class="panel-title">RPC请求</h4>
							 </div>
				            <div class="panel-body panel">
				                <div class="panel-content">
							        <div id="rpcReq">
							        	<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12" style="margin-bottom:10px;">
						                	<div class="input-group-addon" style="width:100px;">zk集群:</div>
						                	<input type="hidden" id = "registerAddrId">
			                				<select id = "registerAddr" name="registerAddr" class="form-control select2 " style="width:70%;">
			                					
					           				</select>
						       			</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12" style="margin-bottom:10px;">
						                	<div class="input-group-addon" style="width:100px;">类名:</div>
			                				<p class="form-control" id="className" name="className" style="width:70%;"></p>
						                	<input type="hidden" name="appName" >
						                	<input type="hidden" name = "jarPath">
						       			</div>
										<div class="input-group col-md-5 col-xs-12 col-lg-12 col-sm-12" style="margin-bottom:10px;">
						                	<div class="input-group-addon" style="width:100px;">方法名:</div>
			                				<p class="form-control" id="methodName" name="methodName" style="width:70%;margin-right:10px;"></p>
						                	<button type="button" class="btn btn-info mg-2-5" style = "background-color:#428cb1;" onclick="$.httprpcRequest.submit.rpcSend()">Send</button>
						       			</div>
						       			
						       			<div class="col-xs-6" style="width:40%;float:left;text-align:left;padding-left: 0px;margin-top:10px;margin-bottom:10px;">
								       			请求参数：
					       				</div>
					       				<div class="col-xs-6" style="width:40%;float:left;text-align:right;padding-right:0px;margin-bottom:0px;margin-top: 20px;">
					       					<button type="button" class="btn btn-default btn-xs" onclick="$.httprpcRequest.rpcFormatParams()">格式化JSON</button>
					       				</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
						                	<textarea rows="10" id="rpcParams" name="questParams" style="width:80%;"></textarea>
						       			</div>
						       			
						       			<div style="margin-top:10px;margin-bottom:10px;">
						       			返回结果：
						       			</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
						                	<textarea rows="10" name="responseResult" style="width:80%;"></textarea>
						       			</div>
						       			
						       			<div style="margin-top:10px;margin-bottom:10px;" >
						       			扩展说明：
						       			</div>
						       			<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12">
						                	<textarea rows="5" name="extendParams" style="width:80%;" readonly="readonly"></textarea>
						       			</div>
								    </div>
						       </div>
						    </div>
						</div>
						<!-- rpcShowEnd -->
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!--  修改mock状态提示模态框-->
<div class="modal fade bs-example-modal-lg" id="changeMockFlagDialog"
	role="dialog" aria-hidden="true" data-backdrop="static">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">×</button>
				<h4 class="modal-title">修改mock</h4>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<form class="form-horizontal" role="form">
						<h3 class="text-danger text-center">请确认是否修改mock状态?</h3>
					</form>
				</div>
			</div>
			<div class="modal-footer">
				<div style="display: inline;">
					<button type="button" class="btn btn-default" data-dismiss="modal" onclick="initMockManager()">关闭</button>
					<button type="button" class="btn btn-danger"
						onclick="changeMockFlagConfirm()">确定</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!--  修改开启上报时提示需要关闭mock-->
<div class="modal fade bs-example-modal-lg" id="changeReportFlagDialog"
	role="dialog" aria-hidden="true" data-backdrop="static">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">×</button>
				<h4 class="modal-title">开启上报</h4>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<form class="form-horizontal" role="form">
						<h3 class="text-danger text-center">请确认是否开启上报?</h3>
						<p>此时开启上报，将关闭mock</p>
					</form>
				</div>
			</div>
			<div class="modal-footer">
				<div style="display: inline;">
					<button type="button" class="btn btn-default" data-dismiss="modal" onclick="initMockManager()">关闭</button>
					<button type="button" class="btn btn-danger"
						onclick="changeReportFlagWhileNoTMock()">确定</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 修改mock信息模态框 -->
<div class="modal fade fade bs-example-modal-lg"
	id="updateTestInterfaceDataInfoDialog" role="dialog" aria-hidden="true"
	data-backdrop="static">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">×</button>
				<h4 class="modal-title">修改</h4>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<form class="form-horizontal" role="form"
						id="updateTestInterfaceDataInfoForm" novalidate>
						<input type="hidden" name="id" readonly>
						<input type="hidden" name="requestType" value="1"><!-- 请求类型默认是手动输入 -->
						<div class="row">
							<div class="form-group" >
								<label class="col-md-2 control-label">请求参数:</label>
								<div class="col-md-9">
									<textarea class="form-control" id="requestJsonForUpdate" name="requestJson"
										 style="height: 200px;"></textarea>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="form-group">
								<label class="col-md-2 control-label">返回参数:</label>
								<div class="col-md-9">
									<textarea class="form-control" id="responseJsonForUpdate" name="responseJson"
									 style="height: 200px;"></textarea>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			
			<div class="modal-footer">
				<div style="display: inline;">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary"
						onclick="updateTestInterfaceDataInfo()">确定</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 新增 模态框 -->
<div class="modal fade fade bs-example-modal-lg"
	id="addTestInterfaceDataInfoDialog" role="dialog" aria-hidden="true"
	data-backdrop="static">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">×</button>
				<h4 class="modal-title">新增</h4>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<form class="form-horizontal" role="form"
						id="addTestInterfaceDataInfoForm" novalidate>
						<input type="hidden" name="id" readonly><!-- 这里id其实接收了接口id，数据传到后台后要进行调整 -->
						<input type="hidden" name="requestType" value=1><!-- 请求类型默认是手动输入 -->
						<div class="row">
							<div class="form-group">
								<input type="hidden" name="interfaceId" id="interfaceId">
								<label class="col-md-2 control-label">类名:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" name="clsName"
										id="clsName" readonly>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="form-group">
								<label class="col-md-2 control-label">方法名|URL:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" name="methodName"
										id="clsName" readonly>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="form-group" >
								<label class="col-md-2 control-label">请求参数:</label>
								<div class="col-md-9">
									<textarea class="form-control" id="requestJson" name="requestJson"
										 ></textarea>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="form-group">
								<label class="col-md-2 control-label">返回参数:</label>
								<div class="col-md-9">
									<textarea class="form-control" id="responseJson" name="responseJson"
									></textarea>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				<button type="button" class="btn btn-primary"
					onclick="addTestInterfaceDataInfo()">确定</button>
			</div>
		</div>
	</div>
</div>
<style>
	.col-xs-3{
		position: relative;
    	min-height: 1px;
    	padding-right: 0px;
    	padding-left: 0px;
	}
</style>
<script src="../assets/js/httprpcRequest.js" type="text/javascript"></script>